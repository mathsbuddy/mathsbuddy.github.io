<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MathsBuddy ‚Äî Afterschool & Weekend Math Tutoring</title>
  <meta name="description" content="One-to-one math tutoring by Vik (Grade 9, Earl of March HS). Afterschool and weekends at libraries & community places." />
  <meta name="theme-color" content="#0ea5a6" />
  <style>
    :root{ --teal:#0ea5a6; --teal-dark:#0b8485; --teal-900:#0a6b6c; --bg:linear-gradient(135deg,#0ea5a6,#0b8485 60%,#0a6b6c); --white:#fff; --ink:#f8fafc; --muted:rgba(255,255,255,.85); --card:rgba(255,255,255,.08); --stroke:rgba(255,255,255,.18); --shadow:0 10px 30px rgba(0,0,0,.25); --r:22px; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--ink)}
    a{color:var(--white);text-decoration:none}
    .container{max-width:980px;margin:0 auto;padding:22px}
    header{position:sticky;top:0;z-index:40;backdrop-filter:saturate(140%) blur(8px);background:linear-gradient(180deg,rgba(10,107,108,.85),rgba(10,107,108,.55));border-bottom:1px solid var(--stroke)}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{display:grid;place-items:center;width:40px;height:40px;border-radius:12px;background:var(--white);color:var(--teal-900);font-weight:800}
    .brand h1{margin:0;font-size:1.2rem}
    .links{display:flex;gap:16px;flex-wrap:wrap}

    .hero{padding:56px 0 20px}
    .hero h2{font-size:clamp(2rem,5vw,3rem);margin:0 0 10px}
    .hero p{color:var(--muted);margin:0 0 16px;font-size:1.05rem}
    .pill{display:inline-block;padding:8px 12px;border-radius:999px;border:1px solid var(--stroke);background:rgba(255,255,255,.09);color:var(--muted);font-size:.9rem;margin-bottom:10px}

    .grid{display:grid;gap:18px}
    .cols-2{grid-template-columns:repeat(2,1fr)}

    .card{background:var(--card);border:1px solid var(--stroke);border-radius:var(--r);padding:20px;box-shadow:var(--shadow)}
    .section{padding:22px 0}
    .section h3{margin:0 0 10px;font-size:1.4rem}
    .list{margin:0;padding-left:18px}

    .btn{display:inline-flex;align-items:center;gap:8px;padding:12px 16px;border-radius:999px;border:1px solid var(--stroke);box-shadow:var(--shadow);transition:.2s transform}
    .btn:hover{transform:translateY(-2px)}
    .btn.primary{background:var(--white);color:var(--teal-900);font-weight:700}
    .btn.ghost{background:transparent;color:var(--white)}

    form{display:grid;gap:12px}
    input,select,textarea{width:100%;padding:12px 14px;border-radius:12px;border:1px solid var(--stroke);background:rgba(255,255,255,.12);color:var(--white)}
    input::placeholder,textarea::placeholder{color:rgba(255,255,255,.7)}
    label{font-size:.95rem;color:var(--muted)}
    select{background-color:var(--teal-dark);color:var(--white)}
    option{background-color:var(--teal);color:var(--white)}
    .fineprint{font-size:.85rem;color:var(--muted)}

    footer{padding:26px 0 38px;border-top:1px solid var(--stroke);margin-top:24px}

    /* Compose chooser modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.45);z-index:60}
    .modal.open{display:flex}
    .modal-card{background:var(--card);border:1px solid var(--stroke);backdrop-filter: blur(8px) saturate(140%);border-radius:16px;box-shadow:var(--shadow);padding:18px;max-width:520px;width:92%}
    .modal-card h4{margin:0 0 8px}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .small{font-size:.9rem;color:var(--muted)}
    .close{cursor:pointer;float:right;opacity:.8}
    .copy{cursor:pointer}

    /* Toast popup (kept for copy-to-clipboard) */
    .toast{position:fixed;left:50%;bottom:26px;transform:translateX(-50%) translateY(20px);opacity:0;transition:all .25s ease;z-index:80;background:rgba(0,0,0,.6);color:#fff;padding:12px 16px;border-radius:999px;border:1px solid var(--stroke);backdrop-filter: blur(8px) saturate(140%)}
    .toast.show{opacity:1;transform:translateX(-50%) translateY(0)}

    /* Center popup modal for thank-you */
    .popup{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:100}
    .popup.show{display:flex}
    .popup-card{background:#fff;color:#333;padding:20px 26px;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,.25);text-align:center;max-width:340px;width:92%}
    .popup-card p{margin:0 0 16px;font-size:1.1rem}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        <span class="logo" aria-hidden="true">Mb</span>
        <h1>MathsBuddy</h1>
      </div>
      <nav class="links" aria-label="Primary">
        <a href="#help">Help</a>
        <a href="#works">How it works</a>
        <a href="#request">Request Form</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- HERO -->
    <section class="hero">
      <span class="pill">Afterschool and weekend math tutoring</span>
      <h2>Build math confidence with <em>MathsBuddy</em></h2>
      <p>Hi! I‚Äôm <strong>Vik</strong>, a Grade 9 ace student at <strong>Earl of March High School</strong> in Ottawa,Canada. I love math and I love helping younger students understand it too ‚Äî from homework help to test prep and problem-solving strategies.</p>
      <div class="cta" style="display:flex;gap:12px;flex-wrap:wrap;margin-top:8px">
        <a class="btn primary" href="tel:+12269809238">üìû Call: +1 (226) 980-9238</a>
        <a class="btn ghost" id="emailDirectBtn" href="#">‚úâÔ∏è Email Me</a>
      </div>
    </section>

    <!-- WHAT I CAN HELP WITH -->
    <section id="help" class="section">
      <div class="card">
        <h3>What I can help with</h3>
        <ul class="list">
          <li>Homework help & simple study plans</li>
          <li>Foundations: arithmetic, fractions, decimals, intro algebra</li>
          <li>Problem-solving and test strategies</li>
          <li>Contest warm-ups: <em>Gauss, Caribou, Kangaroo, AMC 8, Pascal</em> and more</li>
        </ul>
      </div>
    </section>

    <!-- HOW IT WORKS -->
    <section id="works" class="section">
      <div class="card">
        <h3>How it works</h3>
        <ol class="list">
          <li><strong>Reach out</strong> with the student‚Äôs grade and goals.</li>
          <li><strong>Pick a time</strong> (after school or weekends) and <strong>choose a location</strong>.</li>
          <li><strong>Meet up</strong> for a focused one-to-one session (45‚Äì90 minutes).</li>
        </ol>
      </div>
    </section>

    <!-- REQUEST FORM -->
    <section id="request" class="section">
      <div class="card">
        <h3>Quick Request Form</h3>
        <form id="requestForm" novalidate>
          <label>Parent/Guardian name
            <input type="text" name="parent" placeholder="Your name" required />
          </label>
          <label>Student grade
            <select name="grade" required>
              <option value="" selected disabled>Choose‚Ä¶</option>
              <option>Grade 3</option>
              <option>Grade 4</option>
              <option>Grade 5</option>
              <option>Grade 6</option>
              <option>Grade 7</option>
              <option>Grade 8</option>
              <option>Grade 9</option>
            </select>
          </label>
          <label>Location
            <select name="location" required>
              <option value="" selected disabled>Select location‚Ä¶</option>
              <option>Beaverbrook Library</option>
              <option>Richcraft Recreation Complex</option>
              <option>Kanata Leisure Centre & Wave Pool</option>
            </select>
          </label>
          <label>Preferred Time
            <select name="time" required>
              <option value="" selected disabled>Select time‚Ä¶</option>
              <option>Saturday morning</option>
              <option>Saturday afternoon</option>
              <option>Sunday morning</option>
              <option>Sunday afternoon</option>
              <option>Monday‚ÄìFriday between 5:30‚Äì7:30pm</option>
            </select>
          </label>
          <label>Session Length
            <select name="length" required>
              <option value="" selected disabled>Choose‚Ä¶</option>
              <option>45 minutes</option>
              <option>60 minutes</option>
              <option>1 hour 30 minutes</option>
            </select>
          </label>
          <label>Topics or goals
            <textarea name="topics" rows="3" placeholder="Fractions, decimals, algebra basics, test prep‚Ä¶" required></textarea>
          </label>
          <button class="btn primary" type="submit">Send request via email</button>
          <div id="formMsg" class="fineprint" role="status"></div>
        </form>
      </div>
    </section>

    <!-- Compose chooser modal -->
    <div id="chooser" class="modal" aria-hidden="true" role="dialog" aria-label="Choose email app">
      <div class="modal-card">
        <div class="close" id="chooserClose">‚úï</div>
        <h4>Choose how to send your email</h4>
        <p class="small">Pick the option that matches the email you use.</p>
        <div class="row" style="margin:12px 0">
          <a id="linkMailto" class="btn primary" href="#">Default Mail app</a>
          <a id="linkGmail" class="btn ghost" target="_blank" rel="noopener" href="#">Open in Gmail</a>
          <a id="linkOutlook" class="btn ghost" target="_blank" rel="noopener" href="#">Open in Outlook</a>
          <a id="linkYahoo" class="btn ghost" target="_blank" rel="noopener" href="#">Open in Yahoo</a>
        </div>
        <label class="small" style="display:flex;gap:8px;align-items:center;margin-top:6px">
          <input type="checkbox" id="rememberChoice" /> Remember my choice next time
        </label>
        <p class="small" style="margin-top:10px">Or copy the address: <span id="copyAddr" class="copy" title="Copy email"></span></p>
      </div>
    </div>

    <!-- Thank You Popup Modal -->
    <div id="thankYouPopup" class="popup" role="dialog" aria-modal="true" aria-label="Message sent">
      <div class="popup-card">
        <p>Thank you ! will get back you to.</p>
        <button id="popupOkBtn" class="btn primary">OK</button>
      </div>
    </div>

    <!-- Toast popup container (used for copy-to-clipboard only) -->
    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <footer>
      <p class="fineprint">¬© <span id="year"></span> MathsBuddy. All rights reserved.</p>
    </footer>
  </main>

  <script>
    function shouldScroll(href){
      return typeof href === 'string' && href.startsWith('#') && href.length > 1;
    }
    document.addEventListener('click', (e)=>{
      const a = e.target.closest('a[href]');
      if(!a) return;
      const href = a.getAttribute('href');
      if(shouldScroll(href)){
        e.preventDefault();
        const target = document.querySelector(href);
        target?.scrollIntoView({behavior:'smooth', block:'start'});
      }
    });
    document.getElementById('year').textContent=new Date().getFullYear();

    const form=document.getElementById('requestForm');
    const msg=document.getElementById('formMsg');
    const chooser=document.getElementById('chooser');
    const linkMailto=document.getElementById('linkMailto');
    const linkGmail=document.getElementById('linkGmail');
    const linkOutlook=document.getElementById('linkOutlook');
    const linkYahoo=document.getElementById('linkYahoo');
    const remember=document.getElementById('rememberChoice');
    const chooserClose=document.getElementById('chooserClose');
    const emailDirectBtn=document.getElementById('emailDirectBtn');

    const toastEl=document.getElementById('toast');
    const popup=document.getElementById('thankYouPopup');
    const popupOkBtn=document.getElementById('popupOkBtn');

    const TO = 'mathbuddy12@gmail.com';

    const copyAddr = document.getElementById('copyAddr');
    if(copyAddr){ copyAddr.textContent = 'üìã ' + TO; }

    function showToast(text){
      if(!toastEl) return;
      toastEl.textContent = text;
      toastEl.classList.add('show');
      setTimeout(()=> toastEl.classList.remove('show'), 2600);
    }

    function showPopup(){
      popup?.classList.add('show');
    }
    popupOkBtn?.addEventListener('click',()=>{ popup?.classList.remove('show'); });

    function buildBody(parent,grade,locationSel,time,length,topics){
      return `Hi Hritvik,\n\n`+
      `Parent/Guardian: ${parent}\n`+
      `Student grade: ${grade}\n`+
      `Location: ${locationSel}\n`+
      `Preferred time: ${time}\n`+
      `Session length: ${length}\n`+
      `Topics/goals: ${topics}\n\n`+
      `Thanks!`;
    }
    function openChooser(subject, body){
      const esub = encodeURIComponent(subject);
      const ebody = encodeURIComponent(body);
      linkMailto.setAttribute('href', `mailto:${TO}?subject=${esub}&body=${ebody}`);
      linkGmail.setAttribute('href',  `https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(TO)}&su=${esub}&body=${ebody}`);
      linkOutlook.setAttribute('href',`https://outlook.office.com/mail/deeplink/compose?to=${encodeURIComponent(TO)}&subject=${esub}&body=${ebody}`);
      linkYahoo.setAttribute('href',  `https://compose.mail.yahoo.com/?to=${encodeURIComponent(TO)}&subj=${esub}&body=${ebody}`);

      chooser.classList.add('open');
      chooser.setAttribute('aria-hidden','false');
    }
    function maybeAuto(subject, body){
      const pref = localStorage.getItem('mb_email_pref');
      if(!pref) return false;
      const esub = encodeURIComponent(subject); const ebody = encodeURIComponent(body);
      const map = {
        mailto: `mailto:${TO}?subject=${esub}&body=${ebody}`,
        gmail: `https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(TO)}&su=${esub}&body=${ebody}`,
        outlook: `https://outlook.office.com/mail/deeplink/compose?to=${encodeURIComponent(TO)}&subject=${esub}&body=${ebody}`,
        yahoo: `https://compose.mail.yahoo.com/?to=${encodeURIComponent(TO)}&subj=${esub}&body=${ebody}`
      };
      const url = map[pref];
      if(url){
        if(pref==='mailto'){ window.location.href = url; } else { window.open(url,'_blank','noopener'); }
        showPopup();
        return true;
      }
      return false;
    }

    chooserClose?.addEventListener('click',()=>{ chooser.classList.remove('open'); chooser.setAttribute('aria-hidden','true'); });
    chooser?.addEventListener('click', (e)=>{ if(e.target===chooser){ chooser.classList.remove('open'); chooser.setAttribute('aria-hidden','true'); } });

    [linkMailto,linkGmail,linkOutlook,linkYahoo].forEach(link=>{
      link.addEventListener('click',(e)=>{
        e.preventDefault();
        const id = link.id.replace('link','').toLowerCase();
        if(remember.checked){ localStorage.setItem('mb_email_pref', id); }
        const url = link.getAttribute('href');
        if(id==='mailto'){ window.location.href = url; }
        else { window.open(url, '_blank', 'noopener'); }
        showPopup();
        chooser.classList.remove('open');
      });
    });

    emailDirectBtn?.addEventListener('click',(e)=>{
      e.preventDefault();
      const subject='Math Tutoring Inquiry ‚Äî MathsBuddy';
      const body = buildBody('','','','','','');
      if(!maybeAuto(subject, body)) openChooser(subject, body);
    });

    form?.addEventListener('submit',(e)=>{
      e.preventDefault();
      const data=new FormData(form);
      const parent=(data.get('parent')||'').toString().trim();
      const grade=(data.get('grade')||'').toString();
      const locationSel=(data.get('location')||'').toString();
      const topics=(data.get('topics')||'').toString().trim();
      const time=(data.get('time')||'').toString();
      const length=(data.get('length')||'').toString();
      if(!parent||!grade||!topics||!locationSel||!time||!length){
        msg.textContent='Please fill in all required fields: name, grade, location, preferred time, session length, and topics.';return;
      }
      const subject='Math Tutoring Request ‚Äî MathsBuddy';
      const body = buildBody(parent,grade,locationSel,time,length,topics);

      if(!maybeAuto(subject, body)){
        openChooser(subject, body);
        msg.innerHTML = 'Choose your email app above. If nothing opens, you can also copy the address.';
      }
    });

    copyAddr?.addEventListener('click', async ()=>{
      try{ await navigator.clipboard.writeText(TO); showToast('Email copied'); }catch{ showToast('Copy failed'); }
    });

    (function runTests(){
      console.assert(shouldScroll('#help')===true, 'should scroll for #help');
      console.assert(shouldScroll('#request')===true, 'should scroll for #request');
      console.assert(shouldScroll('https://mail.google.com')===false, 'should not scroll for external URLs');
      console.assert(shouldScroll('mailto:test@example.com')===false, 'should not scroll for mailto links');
      console.assert(document.getElementById('copyAddr').textContent.includes('mathbuddy12@gmail.com'), 'TO shows in UI');
      console.log('[MathsBuddy] Inline tests passed');
    })();
  </script>
</body>
</html>
